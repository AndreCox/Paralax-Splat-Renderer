{
  "version": 3,
  "sources": ["../../parallax-effect/dist/parallax-effect.mjs"],
  "sourcesContent": ["const head = (function(i,n,j,e,c,t,s){t=n.createElement(j),s=n.getElementsByTagName(j)[0];t.appendChild(n.createTextNode(e.text));t.onload=c(e);s?s.parentNode.insertBefore(t,s):n.head.appendChild(t);});\n/**\n * Fetch Inject module.\n *\n * @module fetchInject\n * @license Zlib\n * @param {(USVString[]|Request[])} inputs Resources you wish to fetch.\n * @param {Promise} [promise] A promise to await before attempting injection.\n * @throws {Promise<ReferenceError>} Rejects with error when given no arguments.\n * @throws {Promise<TypeError>} Rejects with error on invalid arguments.\n * @throws {Promise<Error>} Whatever `fetch` decides to throw.\n * @throws {SyntaxError} Via DOM upon attempting to parse unexpected tokens.\n * @returns {Promise<Object[]>} A promise which resolves to an `Array` of\n *     Objects containing `Response` `Body` properties used by the module.\n */\nconst fetchInject = function (inputs, promise) {\n  if (!arguments.length) return Promise.reject(new ReferenceError(\"Failed to execute 'fetchInject': 1 argument required but only 0 present.\"))\n  if (arguments[0] && arguments[0].constructor !== Array) return Promise.reject(new TypeError(\"Failed to execute 'fetchInject': argument 1 must be of type 'Array'.\"))\n  if (arguments[1] && arguments[1].constructor !== Promise) return Promise.reject(new TypeError(\"Failed to execute 'fetchInject': argument 2 must be of type 'Promise'.\"))\n  const resources = [];\n  const deferreds = promise ? [].concat(promise) : [];\n  const thenables = [];\n  inputs.forEach(input => deferreds.push(\n    window.fetch(input).then(res => {\n      return [res.clone().text(), res.blob()]\n    }).then(promises => {\n      return Promise.all(promises).then(resolved => {\n        resources.push({ text: resolved[0], blob: resolved[1] });\n      })\n    })\n  ));\n  return Promise.all(deferreds).then(() => {\n    resources.forEach(resource => {\n      thenables.push({ then: resolve => {\n        resource.blob.type.includes('text/css')\n          ? head(window, document, 'style', resource, resolve)\n          : head(window, document, 'script', resource, resolve);\n      } });\n    });\n    return Promise.all(thenables)\n  })\n};\n\nlet video, model, eyes, dist;\nlet opt = {};\n\nfunction init(pushUpdate, settings = {}) {\n  opt.pushUpdate = pushUpdate;\n  opt.smoothEye = 0.8;\n  opt.smoothDist = 0.25;\n  opt.defautDist = 0.12;\n  opt.threshold = 0.85;\n  opt.tfUrl = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@3.7.0/dist/tf-core.min.js';\n  opt.wasmUrl = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@3.7.0/dist/tf-backend-wasm.min.js';\n  opt.wasmPath = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@3.7.0/dist/tfjs-backend-wasm.wasm';\n  opt.convUrl = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter@3.7.0/dist/tf-converter.min.js';\n  opt.modelUrl = 'https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface@0.0.7/dist/blazeface.min.js';\n  Object.assign(opt, settings);\n\n  video = document.createElement('video');\n  video.playsInline = true;\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia({ video: true, facingMode: 'user' }).then((stream) => {\n      fetchInject([\n        opt.modelUrl\n      ], fetchInject([\n        opt.convUrl,\n        opt.wasmUrl\n      ], fetchInject([\n        opt.tfUrl\n      ]))).then(() => {\n        return new Promise((resolve) => {\n          video.srcObject = stream;\n          video.play();\n          video.onloadedmetadata = () => {\n            video.width = video.videoWidth;\n            video.height = video.videoHeight;\n            tf.wasm.setWasmPath(opt.wasmPath);\n            tf.setBackend('wasm').then(async () => {\n              model = await blazeface.load();\n              model.scoreThreshold = opt.threshold;\n              resolve(requestAnimationFrame(render));\n            }).catch(() => {\n              reject('Internal error with wasm.');\n            });\n          };\n        });\n      });\n    }).catch(() => {\n      throw('Turn on camera or change browser.');\n    });\n  }\n}\n\nasync function render() {\n  let faces = await model.estimateFaces(video, false, true, true);\n  if (faces.length > 0) {\n    let e = faces[0].landmarks;\n    let nextEyes = [e[0][0], e[0][1], e[1][0], e[1][1]];\n    if (typeof eyes == 'undefined') {\n      eyes = nextEyes;\n    } else {\n      for (let i = 0; i < 4; ++i) {\n        eyes[i] *= 1 - opt.smoothEye;\n        eyes[i] += nextEyes[i] * opt.smoothEye;\n      }\n    }\n\n    let dx = eyes[0] - eyes[2];\n    let dy = eyes[1] - eyes[3];\n    let nextDist = Math.sqrt(dx * dx + dy * dy) / video.width;\n    if (typeof dist == 'undefined') {\n      dist = nextDist;\n    } else {\n      dist *= 1 - opt.smoothDist;\n      dist += nextDist * opt.smoothDist;\n    }\n\n    opt.pushUpdate({\n      x: (eyes[0] + eyes[2]) / video.width - 1,\n      y: 1 - (eyes[1] + eyes[3]) / video.width,\n      z: opt.defautDist / dist\n    });\n  }\n  requestAnimationFrame(render);\n}\n\nexport { init };\n"],
  "mappings": "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",
  "names": []
}
